(function(e){function t(t){for(var i,o,s=t[0],n=t[1],c=t[2],d=0,m=[];d<s.length;d++)o=s[d],r[o]&&m.push(r[o][0]),r[o]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);u&&u(t);while(m.length)m.shift()();return l.push.apply(l,c||[]),a()}function a(){for(var e,t=0;t<l.length;t++){for(var a=l[t],i=!0,o=1;o<a.length;o++){var n=a[o];0!==r[n]&&(i=!1)}i&&(l.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},r={app:0},l=[];function o(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"256f241c"}[e]+".js"}function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,i){a=r[e]=[t,i]});t.push(a[2]=i);var l,n=document.createElement("script");n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.src=o(e),l=function(t){n.onerror=n.onload=null,clearTimeout(c);var a=r[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),l=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+l+")");o.type=i,o.request=l,a[1](o)}r[e]=void 0}};var c=setTimeout(function(){l({type:"timeout",target:n})},12e4);n.onerror=n.onload=l,document.head.appendChild(n)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var d=0;d<n.length;d++)t(n[d]);var u=c;l.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),r=a("bc3a"),l=a.n(r),o=a("bb71");a("da64");i["a"].use(o["a"],{iconfont:"md"});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},e._l(e.items,function(t){return a("menu-item",{key:t.id,attrs:{icon:t.icon,title:t.text},on:{click:function(a){e.go(t.path)}}})}),1)],1),a("v-toolbar",{attrs:{color:"indigo",dark:"",fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",[e._v("CIP FP Batoi - Borsa de Treball")]),a("v-spacer"),a("v-toolbar-title",{staticClass:"ml-0 pl-3"},[a("h2",[e._v(e._s(e.title))])])],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("router-view",{on:{setTitle:e.setTitle}})],1)],1)],1),a("v-footer",{attrs:{color:"indigo",app:""}},[a("span",{staticClass:"white--text"},[e._v("© CIP FP Batoi 2018")])])],1)},n=[],c=(a("7514"),"http://borsaTreball.my/"),d=1,u={getTable:function(e,t){if(t){var a="";for(var i in t)a+=i+"="+t[i]+"&";return a=a.substr(0,a.length-1),l.a.get(c+e+"?"+a)}return l.a.get(c+e)},getItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return l.a.get(c+e+"/"+t)},delItem:function(e,t){return l.a.delete(c+e+"/"+t)},saveItem:function(e,t){return l.a.post(c+e,t)},updateItem:function(e,t,a){return l.a.put(c+e+"/"+t,a)},getUser:function(e){return new Promise(function(t,a){t({data:{id:5,user:e.user,rol:2,token:"asdad6acguas6utash768a"}})})},saveUser:function(e){return response={data:{id:5,user:e.user,rol:2,token:"asdad6acguas6utash768a"}}},sendMail:function(e){return l.a.post(c+"/mail",e)}},m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-list-tile",{on:{click:function(t){e.$emit("click")}}},[a("v-list-tile-action",[a("v-icon",[e._v(e._s(e.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v(e._s(e.title))])],1)],1)},v=[],f={props:{icon:{type:String,default:"home"},title:{type:String,required:!0}}},p=f,h=a("2877"),b=a("6544"),x=a.n(b),_=a("132d"),g=a("ba95"),I=a("40fe"),k=a("5d23"),y=Object(h["a"])(p,m,v,!1,null,null,null);y.options.__file="MenuItem.vue";var w=y.exports;x()(y,{VIcon:_["a"],VListTile:g["a"],VListTileAction:I["a"],VListTileContent:k["a"],VListTileTitle:k["b"]});var C={data:function(){return{drawer:null,items:[],title:"Borsa de treball"}},props:{source:String},components:{MenuItem:w},mounted:function(){this.loadData()},methods:{loadData:function(){var e=this;u.getTable("menu").then(function(t){var a=t.data.filter(function(e){return e.active});a.filter(function(e){return e.children}).map(function(e){return e.children=JSON.parse(e.children),e.children=e.children.map(function(e){return t.data.find(function(t){return t.id==e})}),e}),e.items=a}).catch(function(e){return console.error(e.data?e.data.message:e.message)})},go:function(e){this.$router.push(e||"/")},setTitle:function(e){this.title=e}}},V=C,q=a("7496"),T=a("a523"),$=a("549c"),R=a("553a"),E=a("a722"),D=a("8860"),N=a("f774"),S=a("9910"),A=a("71d9"),O=a("706c"),L=a("2a7f"),P=Object(h["a"])(V,s,n,!1,null,null,null);P.options.__file="App.vue";var j=P.exports;x()(P,{VApp:q["a"],VContainer:T["a"],VContent:$["a"],VFooter:R["a"],VLayout:E["a"],VList:D["a"],VNavigationDrawer:N["a"],VSpacer:S["a"],VToolbar:A["a"],VToolbarSideIcon:O["a"],VToolbarTitle:L["a"]});var F=a("8c4f"),M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h1",[e._v("Home")])},B=[],z={},U=z,J=Object(h["a"])(U,M,B,!1,null,null,null);J.options.__file="Home.vue";var G=J.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n      "+e._s(t.msg)+"\n    ")])],1)}),a("v-card",[a("v-card-title",[a("v-btn",{attrs:{top:"",right:"",color:"blue",dark:""},on:{click:function(t){t.stopPropagation(),e.openDialog(!1)}}},[a("v-icon",[e._v("add")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Filtrar taula","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,"no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Registres per pàgina",headers:e.headers,search:e.search},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n            "+e._s(t.header.text)+"\n          ")]),a("span",[e._v("\n            "+e._s(t.header.text)+"\n          ")])])]}},{key:"items",fn:function(t){return[a("tr",[a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.id))]),a("td",[e._v(e._s(t.item.nombre))]),a("td",[e._v(e._s(t.item.apellidos))]),a("td",e._l(t.item.ciclos,function(i){return a("v-chip",{key:"cicl-"+i.id_ciclo,attrs:{title:e.descCiclo(i.id_ciclo),color:i.validado?"":"red lighten-4"},on:{dblclick:function(a){e.toogleValida(i,t.item.nombre+" "+t.item.apellidos)}}},[a("v-avatar",{attrs:{color:"grey"}},[a("strong",[e._v(e._s(i.any))])]),e._v("\n\n              "+e._s(e.nomCiclo(i.id_ciclo))+"\n            ")],1)}),1),a("td",[t.item.cv_enlace?a("a",{attrs:{href:t.item.cv_enlace,target:"_blank"}},[a("v-icon",[e._v("folder_shared")])],1):e._e()]),a("td",[a("yes-no-icon",{attrs:{value:t.item.info}})],1),a("td",[a("yes-no-icon",{attrs:{value:t.item.bolsa}})],1),a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:"",title:"Més dades"},on:{click:function(e){t.expanded=!t.expanded}}},[a("v-icon",[e._v(e._s(t.expanded?"remove":"add"))])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){e.openDialog(t.item)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){e.deleteItem(t.item,"l'alumne '"+t.item.nombre+" "+t.item.apellidos+"'")}}},[a("v-icon",[e._v("delete")])],1)],1)])]}},{key:"expand",fn:function(t){return[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("strong",[e._v("Domicil·li:")]),e._v(" "+e._s(t.item.domicilio)+"\n            "),a("v-spacer"),a("strong",[e._v("Telèfon:")]),e._v(" "+e._s(t.item.telefono)+"\n            "),a("v-spacer"),a("strong",[e._v("E-mail:")]),e._v(" "+e._s(t.item.email)+"\n          ")],1)],1)]}},{key:"pageText",fn:function(t){return[e._v("      \n        Registres del "+e._s(t.pageStart)+" al "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n      ")]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        La cerca de "'+e._s(e.search)+'" no dona cap resultat\n      ')])],1)],1),a("v-dialog",{attrs:{width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n        "+e._s(e.isNew?"Nou":"Editar")+" alumne\n      ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Id",placeholder:"Id",readonly:""},model:{value:e.editItem.id,callback:function(t){e.$set(e.editItem,"id",t)},expression:"editItem.id"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Nom",placeholder:"Nom",required:""},model:{value:e.editItem.nombre,callback:function(t){e.$set(e.editItem,"nombre",t)},expression:"editItem.nombre"}})],1),a("v-flex",{attrs:{xs8:""}},[a("v-text-field",{attrs:{label:"Cognoms",placeholder:"Cognoms",required:""},model:{value:e.editItem.apellidos,callback:function(t){e.$set(e.editItem,"apellidos",t)},expression:"editItem.apellidos"}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-textarea",{attrs:{label:"Domicil·li",placeholder:"Domicil·li",counter:"150",rules:e.required150Rules,rows:"3",required:""},model:{value:e.editItem.domicilio,callback:function(t){e.$set(e.editItem,"domicilio",t)},expression:"editItem.domicilio"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",counter:"100",rules:e.required100Rules},model:{value:e.editItem.email,callback:function(t){e.$set(e.editItem,"email",t)},expression:"editItem.email"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Telèfon",placeholder:"Telèfon"},model:{value:e.editItem.telefono,callback:function(t){e.$set(e.editItem,"telefono",t)},expression:"editItem.telefono"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"C.V.",placeholder:"Enllaç al CV en Linkedin, ..."},model:{value:e.editItem.cv_enlace,callback:function(t){e.$set(e.editItem,"cv_enlace",t)},expression:"editItem.cv_enlace"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-checkbox",{attrs:{label:"Rebre info.",placeholder:"Si vols rebre informació del Centre"},model:{value:e.editItem.info,callback:function(t){e.$set(e.editItem,"info",t)},expression:"editItem.info"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-checkbox",{attrs:{label:"Borsa treball",placeholder:"Si vols participar en la borsa de treball"},model:{value:e.editItem.bolsa,callback:function(t){e.$set(e.editItem,"bolsa",t)},expression:"editItem.bolsa"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[e._v("More")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.addItem}},[e._v("Guardar")]),a("v-btn",{attrs:{flat:""},on:{click:e.closeDialog}},[e._v("Cancel·lar")])],1)],1)],1)],1),a("v-dialog",{attrs:{width:"400px"},model:{value:e.dialogCiclo,callback:function(t){e.dialogCiclo=t},expression:"dialogCiclo"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n      "+e._s(e.ciclo.nombre)+"\n    ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs7:""}},[a("v-text-field",{attrs:{label:"Cicle",placeholder:"Cicle",value:e.nomCiclo(e.ciclo.id_ciclo),readonly:""}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"Any",placeholder:"Any de finalització",required:""},model:{value:e.ciclo.any,callback:function(t){e.$set(e.ciclo,"any",t)},expression:"ciclo.any"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-checkbox",{attrs:{label:"Validat",placeholder:"Validat"},model:{value:e.ciclo.validado,callback:function(t){e.$set(e.ciclo,"validado",t)},expression:"ciclo.validado"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[e._v("More")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.validaCiclo}},[e._v("Guardar")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){e.closeDialogCiclo()}}},[e._v("Cancel·lar")])],1)],1)],1)],2)},Y=[],W=(a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-icon",[e._v(e._s(e.value?"done":"clear"))])}),Z=[],Q=(a("c5f6"),{props:{value:{type:[Boolean,Number],requied:!0}}}),K=Q,X=Object(h["a"])(K,W,Z,!1,null,null,null);X.options.__file="YesNoIcon.vue";var ee=X.exports;x()(X,{VIcon:_["a"]});var te={name:"form-rules",data:function(){return{requiredRules:[function(e){return!!e||"El camp és obligatori"}],requiredCheckRules:[function(e){return!!e||"Has de marcar la casella"}],emailRules:[function(e){return!!e||"El e-mail és obligatori"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,4})+$/.test(e)||"Has de posar un e-mail vàlid"}],usernameRules:[function(e){return!!e||"El nom d'usuari és obligatori"},function(e){return e&&e.length>=6||"La mida mínima és de 6 caracters"},function(e){return e&&e.length<=25||"La mida màxima és de 25 caracters"},function(e){return/^[a-zA-Z0-9]+([._]?[a-zA-Z0-9]+)*$/.test(e)||"Només pot contrindre lletres, números, . i _"}],required5Rules:[function(e){return!!e||"El camp és obligatori"},function(e){return e&&e.length<=5||"La mida ha de ser menor de 5 caracters"}],required10Rules:[function(e){return!!e||"El camp és obligatori"},function(e){return e&&e.length<=10||"La mida ha de ser menor de 10 caracters"}],required20Rules:[function(e){return!!e||"El camp és obligatori"},function(e){return e&&e.length<=20||"La mida ha de ser menor de 20 caracters"}],required50Rules:[function(e){return!!e||"El camp és obligatori"},function(e){return e&&e.length<=50||"La mida ha de ser menor de 50 caracters"}],required100Rules:[function(e){return!!e||"El camp és obligatori"},function(e){return e&&e.length<=100||"La mida ha de ser menor de 100 caracters"}],required150Rules:[function(e){return!!e||"El camp és obligatori"},function(e){return e&&e.length<=150||"La mida ha de ser menor de 150 caracters"}]}}},ae=a("be94"),ie=(a("20d6"),a("6762"),a("2fdb"),a("ac4d"),a("8a81"),a("3022"),[{id:2,rol:"Administrador"},{id:3,rol:"Professor"},{id:5,rol:"Empleador"},{id:7,rol:"Alumne"}]),re={getAllRoles:function(){return ie},getRoles:function(e){if(void 0===e)return[];var t=[],a=!0,i=!1,r=void 0;try{for(var l,o=ie[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var s=l.value;e%s.id||t.push(s)}}catch(n){i=!0,r=n}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}return t}},le={data:function(){return{search:"",items:[],errors:[],isNew:!0,dialog:!1,editItem:{},valid:!0,admin:!0}},computed:{imAdmin:function(){return console.log(getRoles(2)),getRoles(2).includes("Administrador")}},methods:{toggleAll:function(){this.selected.length?this.selected=[]:this.selected=this.items.slice()},changeSort:function(e){this.pagination.sortBy===e?this.pagination.descending=!this.pagination.descending:(this.pagination.sortBy=e,this.pagination.descending=!1)},addItem:function(){var e=this;this.$refs.form.validate()&&(this.isNew?u.saveItem(this.table,this.editItem).then(function(t){e.items.push(t.data),e.msgOk("save")}).catch(function(t){return e.msgErr(t)}):u.updateItem(this.table,this.editItem.id,this.editItem).then(function(t){var a=e.items.findIndex(function(e){return e.id==t.data.id});e.items.splice(a,1,t.data),e.msgOk("update")}).catch(function(t){return e.msgErr(t)}))},deleteItem:function(e,t){var a=this;confirm("¿Segur que vols esborrar "+t+"?")&&u.delItem(this.table,e.id).then(function(t){a.items=a.items.filter(function(t){return t!=e}),a.msgOk("delete")}).catch(function(e){return a.msgErr(e)})},msgOk:function(e,t){switch(e){case"delete":t=t||"Registre esborrat correctament";break;case"save":case"update":this.closeDialog(),t=t||"Dades guardades correctament"}this.errors.push({msg:t,type:"success",show:!0}),window.scroll(0,0)},msgErr:function(e){this.dialog&&(this.dialog=!1),this.errors.push({msg:e.data?e.data.message:e.message||e,type:"error",show:!0}),window.scroll(0,0)},delError:function(e){this.errors.splice(e,1)},showExpand:function(){},openDialog:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dialog=!0,e.id?(this.editItem=Object(ae["a"])({},e),this.isNew=!1):(this.isNew||(this.editItem=t),this.isNew=!0)},closeDialog:function(){this.dialog=!1}}},oe={mixins:[te,le],components:{YesNoIcon:ee},data:function(){return{table:"alumnos",headers:[{text:"Id",value:"id"},{text:"Nom",value:"nombre"},{text:"Cognoms",value:"apellidos"},{text:"Cicles",value:"cicles",sortable:!1},{text:"CV",value:"cv_enlace",sortable:!1},{text:"Info",value:"info"},{text:"Borsa",value:"bolsa"}],ciclos:[],dialogCiclo:!1,ciclo:{}}},mounted:function(){this.$emit("setTitle","Manteniment d'Alumnes"),this.loadData()},methods:{loadData:function(){var e=this;u.getTable(this.table).then(function(t){e.items=t.data,u.getTable("alumnos_ciclos").then(function(t){return e.items.forEach(function(e){e.ciclos=t.data.filter(function(t){return e.id==t.id_alumno})})}).catch(function(t){return e.msgErr(t)})}).catch(function(t){return e.msgErr(t)}),u.getTable("ciclos").then(function(t){return e.ciclos=t.data.map(function(e){return{id:e.id,ciclo:e.ciclo,descrip:e.vCiclo}})}).catch(function(t){return e.msgErr(t)})},closeDialogCiclo:function(){this.dialogCiclo=!1,this.ciclo={}},nomCiclo:function(e){return e&&this.ciclos.length?this.ciclos.find(function(t){return t.id==e}).ciclo:""},descCiclo:function(e){return e&&this.ciclos.length?this.ciclos.find(function(t){return t.id==e}).descrip:""},toogleValida:function(e,t){this.ciclo=e,this.ciclo.nombre=t,this.dialogCiclo=!0},validaCiclo:function(){var e=this;u.updateItem("alumnos_ciclos",this.ciclo.id,this.ciclo).then(function(t){e.ciclos[e.ciclos.indexOf(t.data)]=t.data,e.closeDialogCiclo(),e.msgOk("updateCiclo","Ciclo "+(t.data.validado?"validado":"desvalidado")+" correctamente")}).catch(function(t){return e.msgErr(t)})}}},se=oe,ne=a("0798"),ce=a("8212"),de=a("8336"),ue=a("b0af"),me=a("99d9"),ve=a("12b2"),fe=a("ac7c"),pe=a("cc20"),he=a("8fea"),be=a("169a"),xe=a("0e8f"),_e=a("4bd4"),ge=a("2677"),Ie=a("a844"),ke=a("3a2f"),ye=Object(h["a"])(se,H,Y,!1,null,null,null);ye.options.__file="Alumnos.vue";var we=ye.exports;x()(ye,{VAlert:ne["a"],VAvatar:ce["a"],VBtn:de["a"],VCard:ue["a"],VCardActions:me["a"],VCardText:me["b"],VCardTitle:ve["a"],VCheckbox:fe["a"],VChip:pe["a"],VContainer:T["a"],VDataTable:he["a"],VDialog:be["a"],VFlex:xe["a"],VForm:_e["a"],VIcon:_["a"],VLayout:E["a"],VSpacer:S["a"],VTextField:ge["a"],VTextarea:Ie["a"],VTooltip:ke["a"]});var Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n                "+e._s(t.msg)+"\n            ")])],1)}),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Nom d'usuari",title:"Nom d'usuari",required:"",rules:e.usernameRules},model:{value:e.item.username,callback:function(t){e.$set(e.item,"username",t)},expression:"item.username"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"E-mail",title:"E-mail",required:"",rules:e.emailRules},model:{value:e.item.email,callback:function(t){e.$set(e.item,"email",t)},expression:"item.email"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Rol",title:"Rol","read-only":""},model:{value:e.item.rol,callback:function(t){e.$set(e.item,"rol",t)},expression:"item.rol"}})],1),[a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"Id",placeholder:"Id",readonly:""},model:{value:e.item.id,callback:function(t){e.$set(e.item,"id",t)},expression:"item.id"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Cif",placeholder:"Cif",mask:"N#######N",counter:"9"},model:{value:e.item.cif,callback:function(t){e.$set(e.item,"cif",t)},expression:"item.cif"}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-text-field",{attrs:{label:"Nom",placeholder:"Nom",counter:"50",rules:e.required50Rules,required:""},model:{value:e.item.nombre,callback:function(t){e.$set(e.item,"nombre",t)},expression:"item.nombre"}})],1),a("v-flex",{attrs:{xs8:""}},[a("v-textarea",{attrs:{label:"Domicil·li",placeholder:"Domicil·li",counter:"150",rules:e.required150Rules,required:""},model:{value:e.item.domicilio,callback:function(t){e.$set(e.item,"domicilio",t)},expression:"item.domicilio"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Localitat",placeholder:"Localitat",counter:"50",rules:e.required50Rules,required:""},model:{value:e.item.localidad,callback:function(t){e.$set(e.item,"localidad",t)},expression:"item.localidad"}}),a("v-text-field",{attrs:{label:"Persona de contacte",placeholder:"Persona de contacte",counter:"50",rules:e.required50Rules,required:""},model:{value:e.item.contacto,callback:function(t){e.$set(e.item,"contacto",t)},expression:"item.contacto"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Telèfon",placeholder:"Telèfon",counter:"20",rules:e.required20Rules,required:""},model:{value:e.item.telefono,callback:function(t){e.$set(e.item,"telefono",t)},expression:"item.telefono"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Pàgina web",placeholder:"Pàgina web",counter:"50",rules:e.required50Rules},model:{value:e.item.web,callback:function(t){e.$set(e.item,"web",t)},expression:"item.web"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",counter:"100",rules:e.required100Rules},model:{value:e.item.email,callback:function(t){e.$set(e.item,"email",t)},expression:"item.email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Descripció",placeholder:"Descripció",counter:"400",rows:"3"},model:{value:e.item.descripcion,callback:function(t){e.$set(e.item,"descripcion",t)},expression:"item.descripcion"}})],1)],[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Id",placeholder:"Id",readonly:""},model:{value:e.item.id,callback:function(t){e.$set(e.item,"id",t)},expression:"item.id"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Nom",placeholder:"Nom",required:""},model:{value:e.item.nombre,callback:function(t){e.$set(e.item,"nombre",t)},expression:"item.nombre"}})],1),a("v-flex",{attrs:{xs8:""}},[a("v-text-field",{attrs:{label:"Cognoms",placeholder:"Cognoms",required:""},model:{value:e.item.apellidos,callback:function(t){e.$set(e.item,"apellidos",t)},expression:"item.apellidos"}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-textarea",{attrs:{label:"Domicil·li",placeholder:"Domicil·li",counter:"150",rules:e.required150Rules,rows:"3",required:""},model:{value:e.item.domicilio,callback:function(t){e.$set(e.item,"domicilio",t)},expression:"item.domicilio"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",counter:"100",rules:e.required100Rules},model:{value:e.item.email,callback:function(t){e.$set(e.item,"email",t)},expression:"item.email"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Telèfon",placeholder:"Telèfon"},model:{value:e.item.telefono,callback:function(t){e.$set(e.item,"telefono",t)},expression:"item.telefono"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"C.V.",placeholder:"Enllaç al CV en Linkedin, ..."},model:{value:e.item.cv_enlace,callback:function(t){e.$set(e.item,"cv_enlace",t)},expression:"item.cv_enlace"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-checkbox",{attrs:{label:"Rebre info.",placeholder:"Si vols rebre informació del Centre"},model:{value:e.item.info,callback:function(t){e.$set(e.item,"info",t)},expression:"item.info"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-checkbox",{attrs:{label:"Borsa treball",placeholder:"Si vols participar en la borsa de treball"},model:{value:e.item.bolsa,callback:function(t){e.$set(e.item,"bolsa",t)},expression:"item.bolsa"}})],1)],e._l(e.item.ciclos,function(t){return a("v-chip",{key:"cicl-"+t.id_ciclo,attrs:{title:e.descCiclo(t.id_ciclo),color:t.validado?"":"red lighten-4"},on:{dblclick:function(a){e.toogleValida(t,e.item.nombre+" "+e.item.apellidos)}}},[a("v-avatar",{attrs:{color:"grey"}},[a("strong",[e._v(e._s(t.any))])]),e._v("\n\n            "+e._s(e.nomCiclo(t.id_ciclo))+"\n        ")],1)}),a("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("\n      submit\n    ")]),a("v-btn",{on:{click:e.clear}},[e._v("clear")])],2)],1)],1)],2)},Ve=[],qe={mixins:[te],data:function(){return{roles:re.getAllRoles(),errors:[],valid:!1,item:{},isNew:!1}},mounted:function(){this.$emit("setTitle","El meu perfil"),this.loadData()},methods:{loadData:function(){var e=this;u.getItem("users").then(function(t){return e.item=t.data}).catch(function(t){return e.errors.push({msg:t.data.message||t.message,type:"error",show:!0})})},submit:function(){var e=this;this.$refs.form.validate()&&(this.item.rol=re.desc2Cod(this.rolDesc),u.updateItem(this.table,this.id,this.item).then(function(t){e.item=t.data,e.item.acepta=!1,e.errors.push({msg:"Datos guardados",type:"success",show:!0}),window.scroll(0,0)}).catch(function(t){e.errors.push({msg:t.data.message||t.message,type:"error",show:!0}),window.scroll(0,0)}))},clear:function(){this.$refs.form.reset(),this.loadData(this.id)},delError:function(e){this.errors.splice(e,1)},getRules:function(e){return this[e]}}},Te=qe,$e=Object(h["a"])(Te,Ce,Ve,!1,null,null,null);$e.options.__file="Perfil.vue";var Re=$e.exports;x()($e,{VAlert:ne["a"],VAvatar:ce["a"],VBtn:de["a"],VCheckbox:fe["a"],VChip:pe["a"],VContainer:T["a"],VFlex:xe["a"],VForm:_e["a"],VLayout:E["a"],VTextField:ge["a"],VTextarea:Ie["a"]});var Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n            "+e._s(t.msg)+"\n        ")])],1)}),a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n      "+e._s(e.isNew?"Nou":"Editar")+" cicle\n    ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-text-field",{attrs:{label:"Nom d'usuari",title:"Nom d'usuari",required:"",rules:e.usernameRules},on:{change:e.checkUser},model:{value:e.item.username,callback:function(t){e.$set(e.item,"username",t)},expression:"item.username"}}),a("v-text-field",{attrs:{label:"Contrasenya",title:"Contrasenya",required:"",min:"4",max:"25",counter:"25",rules:e.required25Rules},model:{value:e.item.password,callback:function(t){e.$set(e.item,"password",t)},expression:"item.password"}}),a("v-text-field",{attrs:{label:"Repeteix la contrasenya",title:"Repeteix la contrasenya",required:""},on:{change:e.checkUser},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),a("v-text-field",{attrs:{label:"E-mail",title:"E-mail",required:"",rules:e.emailRules},model:{value:e.item.email,callback:function(t){e.$set(e.item,"email",t)},expression:"item.email"}}),e.isNew?a("v-radio-group",{attrs:{hint:"Indica el teu rol en la Borsa:","persistent-hint":!0,required:""},model:{value:e.item.rol,callback:function(t){e.$set(e.item,"rol",t)},expression:"item.rol"}},[a("v-radio",{attrs:{label:"Empresa - Ofereix un treball",value:5}}),a("v-radio",{attrs:{label:"Alumne - Busque un treball",value:7}})],1):e._e()],1)],1)],1)],1)],2)},De=[],Ne={mixins:[le,te],props:["username","password","rol"],data:function(){return{item:{},password2:""}},methods:{checkPassword:function(){this.password2!==this.item.password&&(alert("Les contrasenyes no coincideixen"),this.password2="")},checkUser:function(){var e=this;u.ckeckUsername(this.item.username).then(function(t){"ok"!=t.data&&(alert("L'usuari "+e.item.username+" no està lliure. Has de triar altre"),e.item.username="")}).catch(function(t){return e.msgErr(t)})},saveUser:function(){var e=this;u.saveItem("users",{username:this.item.username,password:this.item.password,rol:this.item.rol}).then(function(t){var a=5==rol?"empresas":"alumnos";e.item.id=t.data.id,u.saveItem(a,e.item).then(function(t){var a="El teu usuari s'ha creat correctament. ";a+=5==rol?"Ja pots crear ofertes de treball des del menú.":"Ara edita el teu perfil per a afegir els cicles que has fet en nosaltres",alert(a),e.$router.push({path:"/about"})}).catch(function(t){return e.msgErr(t)})}).catch(function(t){return e.msgErr(t)})}}},Se=Ne,Ae=a("67b6"),Oe=a("43a6"),Le=Object(h["a"])(Se,Ee,De,!1,null,null,null);Le.options.__file="Register.vue";var Pe=Le.exports;x()(Le,{VAlert:ne["a"],VCard:ue["a"],VCardTitle:ve["a"],VContainer:T["a"],VForm:_e["a"],VLayout:E["a"],VRadio:Ae["a"],VRadioGroup:Oe["a"],VTextField:ge["a"]});var je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n              "+e._s(t.msg)+"\n          ")])],1)}),a("v-card",[a("v-card-title",[a("v-btn",{attrs:{top:"",right:"",color:"blue",dark:""},on:{click:function(t){t.stopPropagation(),e.openDialog(!1)}}},[a("v-icon",[e._v("add")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Filtrar taula","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,"no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Registres per pàgina",headers:e.headers,search:e.search},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n              "+e._s(t.header.text)+"\n              ")]),a("span",[e._v("\n              "+e._s(t.header.text)+"\n              ")])])]}},{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.codigo))]),a("td",[e._v(e._s(t.item.ciclo))]),a("td",[e._v(e._s(t.item.vCiclo))]),a("td",[e._v(e._s(t.item.responsable?e.objectProfes[t.item.responsable]:""))]),a("td",[e._v(e._s(t.item.Dept))]),a("td",[e._v(e._s(t.item.vDept))]),e.admin?a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){e.openDialog(t.item)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){e.deleteItem(t.item,"ciclo")}}},[a("v-icon",[e._v("delete")])],1)],1):e._e()]}},{key:"pageText",fn:function(t){return[e._v("      \n      Registres del "+e._s(t.pageStart)+" al "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n      ")]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n      La cerca de "'+e._s(e.search)+'" no dona cap resultat\n    ')])],1)],1),a("v-dialog",{attrs:{width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n        "+e._s(e.isNew?"Nou":"Editar")+" cicle\n      ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"Id",placeholder:"Id",readonly:""},model:{value:e.editItem.id,callback:function(t){e.$set(e.editItem,"id",t)},expression:"editItem.id"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Codi",placeholder:"Codi",mask:"NNNN",counter:"4",required:""},model:{value:e.editItem.codigo,callback:function(t){e.$set(e.editItem,"codigo",t)},expression:"editItem.codigo"}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-text-field",{attrs:{label:"Cicle",placeholder:"Cicle",counter:"50",rules:e.required50Rules,required:""},model:{value:e.editItem.ciclo,callback:function(t){e.$set(e.editItem,"ciclo",t)},expression:"editItem.ciclo"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nom",placeholder:"Nom",counter:"100",rules:e.required100Rules,required:""},model:{value:e.editItem.vCiclo,callback:function(t){e.$set(e.editItem,"vCiclo",t)},expression:"editItem.vCiclo"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"Dept",placeholder:"Codi del departament",mask:"##",required:""},model:{value:e.editItem.Dept,callback:function(t){e.$set(e.editItem,"Dept",t)},expression:"editItem.Dept"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Nom Dept",placeholder:"Nom del departament",counter:"50",rules:e.required50Rules,required:""},model:{value:e.editItem.vDept,callback:function(t){e.$set(e.editItem,"vDept",t)},expression:"editItem.vDept"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{label:"Responsable",items:e.profes,"item-text":"nombre","item-value":"id",required:"","single-line":""},model:{value:e.editItem.responsable,callback:function(t){e.$set(e.editItem,"responsable",t)},expression:"editItem.responsable"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[e._v("More")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.addItem}},[e._v("Guardar")]),a("v-btn",{attrs:{flat:""},on:{click:e.closeDialog}},[e._v("Cancel·lar")])],1)],1)],1)],1)],2)},Fe=[],Me={mixins:[te,le],data:function(){return{table:"ciclos",profes:[],headers:[{text:"Codi",value:"codigo"},{text:"Cicle",value:"ciclo"},{text:"Nom",value:"vCiclo"},{text:"Responsable",value:"responsable"},{text:"Cod.",value:"Dept"},{text:"Família",value:"vDept"}]}},mounted:function(){this.$emit("setTitle","Manteniment de Cicles"),this.loadData()},computed:{objectProfes:function(){var e={};return this.profes.forEach(function(t){return e[t.id]=t.nombre}),e}},methods:{loadData:function(){var e=this;u.getTable(this.table).then(function(t){return e.items=t.data}).catch(function(t){return e.msgErr(t)}),u.getTable("profesores").then(function(t){return e.profes=t.data.map(function(e){return{id:e.id,nombre:e.apellidos+", "+e.nombre}})}).catch(function(t){return e.msgErr(t)})},nomProfe:function(e){}}},Be=Me,ze=a("b56d"),Ue=Object(h["a"])(Be,je,Fe,!1,null,null,null);Ue.options.__file="Ciclos.vue";var Je=Ue.exports;x()(Ue,{VAlert:ne["a"],VBtn:de["a"],VCard:ue["a"],VCardActions:me["a"],VCardTitle:ve["a"],VContainer:T["a"],VDataTable:he["a"],VDialog:be["a"],VFlex:xe["a"],VForm:_e["a"],VIcon:_["a"],VLayout:E["a"],VSelect:ze["a"],VSpacer:S["a"],VTextField:ge["a"],VTooltip:ke["a"]});var Ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n                "+e._s(t.msg)+"\n            ")])],1)}),a("v-card",[a("v-card-title",[a("v-btn",{attrs:{top:"",right:"",color:"blue",dark:""},on:{click:function(t){t.stopPropagation(),e.editarItem(!1)}}},[a("v-icon",[e._v("add")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Filtrar taula","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,"no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Registres per pàgina",headers:e.headers,search:e.search},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                    "+e._s(t.header.text)+"\n                ")]),a("span",[e._v("\n                    "+e._s(t.header.comment)+"\n                ")])])]}},{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.id))]),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.order))]),a("td",[e._v(e._s(t.item.text))]),a("td",[e._v(e._s(t.item.path))]),a("td",[a("v-icon",[e._v(e._s(t.item.icon))])],1),a("td",[e._v(e._s(t.item.children)+" \n            "),t.item.children?a("a",{on:{click:function(a){e.expande(t)}}},[a("v-icon",[e._v("add")])],1):e._e()]),t.item.children?[a("td",[a("v-icon",[e._v(e._s(t.item.model?"done":"clear"))])],1),a("td",[a("v-icon",[e._v(e._s(t.item.icon_alt))])],1)]:a("td",{attrs:{colspan:"2"}}),a("td",[e._v(e._s(t.item.rol))]),a("td",[a("v-icon",[e._v(e._s(t.item.active?"done":"clear"))])],1),a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){e.editarItem(t.item)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){e.deleteItem(t.item,"text")}}},[a("v-icon",[e._v("delete")])],1)],1)]}},{key:"expand",fn:function(t){return[a("table",[a("tr",[a("th",[e._v("Submenú")]),e._l(e.headers,function(t,i){return a("th",{key:i},[e._v(e._s(t.text))])})],2),e._l(e.childItems,function(t){return a("tr",{key:t.id},[a("td"),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.id))]),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.order))]),a("td",[e._v(e._s(t.text))]),a("td",[e._v(e._s(t.path))]),a("td",[a("v-icon",[e._v(e._s(t.icon))])],1),a("td",[e._v(e._s(t.children))]),a("td",[a("yes-no-icon",{attrs:{value:t.model}})],1),a("td",[a("v-icon",[e._v(e._s(t.icon_alt))])],1),a("td",[e._v(e._s(t.rol))]),a("td",[a("yes-no-icon",{attrs:{value:t.active}})],1)])})],2)]}},{key:"pageText",fn:function(t){return[e._v("\n        Mostrando del "+e._s(t.pageStart)+" al "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n        ")]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        La búsqueda de "'+e._s(e.search)+'" no produjo ningún resultado.\n      ')])],1)],1),a("v-dialog",{attrs:{width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n          "+e._s(e.isNew?"Nou":"Editar")+" element del menú\n        ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Id",placeholder:"Id",readonly:""},model:{value:e.editItem.id,callback:function(t){e.$set(e.editItem,"id",t)},expression:"editItem.id"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"Order",placeholder:"Order",required:""},model:{value:e.editItem.order,callback:function(t){e.$set(e.editItem,"order",t)},expression:"editItem.order"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Text",placeholder:"Text",required:""},model:{value:e.editItem.text,callback:function(t){e.$set(e.editItem,"text",t)},expression:"editItem.text"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Ruta",placeholder:"Ruta",required:""},model:{value:e.editItem.path,callback:function(t){e.$set(e.editItem,"path",t)},expression:"editItem.path"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-layout",{staticClass:"row"},[a("v-text-field",{attrs:{label:"Icona",placeholder:"Icona",required:""},model:{value:e.editItem.icon,callback:function(t){e.$set(e.editItem,"icon",t)},expression:"editItem.icon"}}),a("v-icon",[e._v(e._s(e.editItem.icon))])],1)],1),a("v-flex",{attrs:{xs4:""}},[a("v-checkbox",{attrs:{label:"Desplegat",placeholder:"Si ha d'aparèixer desplegst per defecte",disabled:0==e.submenus.length},model:{value:e.editItem.model,callback:function(t){e.$set(e.editItem,"model",t)},expression:"editItem.model"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-layout",{staticClass:"row"},[a("v-text-field",{attrs:{label:"Icona desplegat",placeholder:"Icona desplegat",disabled:0==e.submenus.length},model:{value:e.editItem.icon_alt,callback:function(t){e.$set(e.editItem,"icon_alt",t)},expression:"editItem.icon_alt"}}),a("v-icon",[e._v(e._s(e.editItem.icon_alt))])],1)],1),a("v-flex",{attrs:{xs3:""}},[a("v-checkbox",{attrs:{label:"Element actiu",placeholder:"Si està actiu o deshabil·litat"},model:{value:e.editItem.active,callback:function(t){e.$set(e.editItem,"active",t)},expression:"editItem.active"}})],1),a("v-flex",{attrs:{xs9:""}},[a("v-select",{attrs:{items:e.roles,"item-value":"id","item-text":"rol",label:"Rols",multiple:"",chips:"",hint:"Qui tendrà accés a aquest menú","persistent-hint":""},model:{value:e.thisRoles,callback:function(t){e.thisRoles=t},expression:"thisRoles"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-subheader",{domProps:{textContent:e._s("Marca los submenús de este menú")}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[e._v("More")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.saveItem}},[e._v("Guardar")]),a("v-btn",{attrs:{flat:""},on:{click:e.closeDialog}},[e._v("Cancel·lar")])],1)],1)],1)],1)],2)},He=[],Ye={ciclos:[{text:"Id",showTable:!1,align:"left",sortable:!1,value:"id"},{text:"Código",showTable:!0,value:"codigo",form:{type:"text",counter:5,required:!0,rules:"required5Rules"}},{text:"Ciclo",showTable:!0,value:"ciclo",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"Depart.",showTable:!0,value:"cDept",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"Nombre",showTable:!0,value:"cCiclo",form:{type:"text",counter:100,required:!0,rules:"required100Rules"}},{text:"Responsable",showTable:!0,value:"responsable",form:{type:"select",table:"profesores",show:"nombre",required:!0}}],empresas:[{text:"Id",showTable:!1,align:"left",sortable:!1,value:"id"},{text:"CIF",showTable:!0,value:"cif",form:{type:"text",counter:9,required:!0,rules:"requiredCifRules"}},{text:"Nombre",showTable:!0,value:"nombre",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"Domicilio",showTable:!1,value:"domicilio",form:{type:"text",counter:150,required:!1,rules:"required150Rules"}},{text:"Localidad",showTable:!0,value:"localidad",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"Teléfono",showTable:!0,value:"telefono",form:{type:"text",counter:20,required:!0,rules:"required20Rules"}},{text:"Web",showTable:!1,value:"web",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"E-mail",showTable:!0,value:"email",form:{type:"text",counter:50,required:!0,rules:"emailRules"}},{text:"Descripción",showTable:!1,value:"descripcion",form:{type:"text",counter:400}}],alumnos:[{text:"Id",showTable:!0,align:"left",sortable:!1,value:"id"},{text:"Nombre",showTable:!0,value:"nombre",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"Apellidos",showTable:!0,value:"apellidos",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"E-mail",showTable:!0,value:"email",form:{type:"text",counter:50,required:!0,rules:"emailRules"}},{text:"Domicilio",showTable:!1,value:"domicilio",form:{type:"text",counter:150,required:!1,rules:"required150Rules"}},{text:"Teléfono",showTable:!1,value:"telefono",form:{type:"text",counter:20,required:!0,rules:"required20Rules"}},{text:"Info",showTable:!0,value:"info",form:{type:"checkbox",text:"¿Deseas recibir información del Centro?"}},{text:"Bolsa",showTable:!0,value:"bolsa",form:{type:"checkbox",text:"¿Deseas participar en la Bolsa de Trabajo?"}},{showTable:!1,value:"acepta",form:{type:"checkbox",text:"¿Aceptas las condiciones del registro?",rules:"requiredCheckRules",required:!0}}],menu:[{text:"Id",showTable:!0,align:"left",value:"id"},{text:"Orden",showTable:!0,value:"order",form:{type:"text",required:!0,rules:"requiredRules"}},{text:"Texto",showTable:!0,value:"text",form:{type:"text",counter:50,required:!0,rules:"required50Rules"}},{text:"Ruta",showTable:!0,value:"path",form:{type:"text",counter:50,required:!0,rules:"requiredPathRules"}},{text:"Icono",showTable:!0,value:"icon",sortable:!1,icon:!0,form:{type:"text",required:!0,rules:"requiredRules"}},{text:"Submenús",showTable:!0,value:"children",comment:"IDs de los ítems de su submenú",form:{type:"text",required:!1}},{text:"Desplegado",showTable:!0,value:"model",form:{text:"Desplegado",type:"checkbox",comment:"Si tiene hijos indica si aparece desplegado por defecto",required:!1}},{text:"Icono-alt",showTable:!0,value:"icon_alt",sortable:!1,icon:!0,form:{type:"text",comment:"El icono a mostrar cuando está desplegado su submenú",required:!1}},{text:"Rol",showTable:!0,value:"rol",form:{type:"text",required:!0,rules:"requiredRules"}},{text:"Activo",showTable:!0,value:"active",form:{text:"Activo",type:"checkbox",comment:"Los submenús deben estar desactivados para que no aparezcan también como ítem principal",required:!1}}]},We={getTable:function(e){return Ye[e]?Ye[e].filter(function(e){return e.showTable}):[]},getForm:function(e){return Ye[e]?Ye[e].filter(function(e){return e.form}):[]}},Ze={mixins:[le],components:{YesNoIcon:ee},data:function(){return{table:"menu",roles:re.getAllRoles(),submenus:[],thisRoles:[],expand:[],headers:We.getTable("menu")}},mounted:function(){this.$emit("setTitle","Manteniment del Menú"),this.loadData()},computed:{childItems:function(){var e=this;return this.items.filter(function(t){return e.expand.includes(t.id)})}},methods:{loadData:function(){var e=this;u.getTable("menu").then(function(t){return e.items=t.data}).catch(function(t){return e.msgErr(t)})},editarItem:function(e){e.children?this.submenus=JSON.parse(e.children).map(function(e){return{id:e}}):this.submenus=[],this.thisRoles=re.getRoles(e.rol),this.openDialog(e)},expande:function(e){e.item.children&&(e.expanded=!e.expanded,this.expand=JSON.parse(e.item.children))},saveItem:function(){this.editItem.children=this.submenus.length?JSON.stringify(this.submenus.map(function(e){return e.id})):null,this.editItem.rol=this.thisRoles.reduce(function(e,t){return t*e}),this.addItem()}}},Qe=Ze,Ke=a("e0c7"),Xe=Object(h["a"])(Qe,Ge,He,!1,null,null,null);Xe.options.__file="Menu.vue";var et=Xe.exports;x()(Xe,{VAlert:ne["a"],VBtn:de["a"],VCard:ue["a"],VCardActions:me["a"],VCardTitle:ve["a"],VCheckbox:fe["a"],VContainer:T["a"],VDataTable:he["a"],VDialog:be["a"],VFlex:xe["a"],VForm:_e["a"],VIcon:_["a"],VLayout:E["a"],VSelect:ze["a"],VSpacer:S["a"],VSubheader:Ke["a"],VTextField:ge["a"],VTooltip:ke["a"]});var tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n                "+e._s(t.msg)+"\n            ")])],1)}),a("v-card",[a("v-card-title",[a("v-btn",{attrs:{top:"",right:"",color:"blue",dark:""},on:{click:function(t){t.stopPropagation(),e.openDialog(!1)}}},[a("v-icon",[e._v("add")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Filtrar taula","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,"no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Registres per pàgina",headers:e.headers,search:e.search},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n                "+e._s(t.header.text)+"\n                ")]),a("span",[e._v("\n                "+e._s(t.header.text)+"\n                ")])])]}},{key:"items",fn:function(t){return[a("tr",[a("td",[e._v(e._s(t.item.cif))]),a("td",[e._v(e._s(t.item.nombre))]),a("td",[e._v(e._s(t.item.localidad))]),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.telefono))]),a("td",[e._v(e._s(t.item.email))]),a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:"",title:"Més dades"},on:{click:function(e){t.expanded=!t.expanded}}},[a("v-icon",[e._v(e._s(t.expanded?"remove":"add"))])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){a.stopPropagation(),e.openDialog(t.item)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){a.stopPropagation(),e.deleteItem(t.item,"nombre")}}},[a("v-icon",[e._v("delete")])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:"",title:"Vore ofertes"},on:{click:function(a){a.stopPropagation(),e.showItem(t.item.id)}}},[a("v-icon",[e._v("event_note")])],1)],1)])]}},{key:"expand",fn:function(t){return[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("strong",[e._v("Domicil·li:")]),e._v(" "+e._s(t.item.domicilio)+"\n              "),a("br"),a("strong",[e._v("Web:")]),e._v(" "+e._s(t.item.web)+"\n              "),a("br"),a("strong",[e._v("Persona de Contacte amb Batoi:")]),e._v(" "+e._s(t.item.contacto)+"\n              "),a("br"),a("strong",[e._v("Descripció:")]),e._v(" "+e._s(t.item.descripcion)+"\n            ")])],1)]}},{key:"pageText",fn:function(t){return[e._v("\n        Registres del "+e._s(t.pageStart)+" al "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n        ")]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        La cerca de "'+e._s(e.search)+'" no dona cap resultat\n      ')])],1)],1),a("v-dialog",{attrs:{width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n          "+e._s(e.isNew?"Nou":"Editar")+" cicle\n        ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{label:"Id",placeholder:"Id",readonly:""},model:{value:e.editItem.id,callback:function(t){e.$set(e.editItem,"id",t)},expression:"editItem.id"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Cif",placeholder:"Cif",mask:"N#######N",counter:"9"},model:{value:e.editItem.cif,callback:function(t){e.$set(e.editItem,"cif",t)},expression:"editItem.cif"}})],1),a("v-flex",{attrs:{xs7:""}},[a("v-text-field",{attrs:{label:"Nom",placeholder:"Nom",counter:"50",rules:e.required50Rules,required:""},model:{value:e.editItem.nombre,callback:function(t){e.$set(e.editItem,"nombre",t)},expression:"editItem.nombre"}})],1),a("v-flex",{attrs:{xs8:""}},[a("v-textarea",{attrs:{label:"Domicil·li",placeholder:"Domicil·li",counter:"150",rules:e.required150Rules,required:""},model:{value:e.editItem.domicilio,callback:function(t){e.$set(e.editItem,"domicilio",t)},expression:"editItem.domicilio"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Localitat",placeholder:"Localitat",counter:"50",rules:e.required50Rules,required:""},model:{value:e.editItem.localidad,callback:function(t){e.$set(e.editItem,"localidad",t)},expression:"editItem.localidad"}}),a("v-text-field",{attrs:{label:"Persona de contacte",placeholder:"Persona de contacte",counter:"50",rules:e.required50Rules,required:""},model:{value:e.editItem.contacto,callback:function(t){e.$set(e.editItem,"contacto",t)},expression:"editItem.contacto"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Telèfon",placeholder:"Telèfon",counter:"20",rules:e.required20Rules,required:""},model:{value:e.editItem.telefono,callback:function(t){e.$set(e.editItem,"telefono",t)},expression:"editItem.telefono"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Pàgina web",placeholder:"Pàgina web",counter:"50",rules:e.required50Rules},model:{value:e.editItem.web,callback:function(t){e.$set(e.editItem,"web",t)},expression:"editItem.web"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",counter:"100",rules:e.required100Rules},model:{value:e.editItem.email,callback:function(t){e.$set(e.editItem,"email",t)},expression:"editItem.email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Descripció",placeholder:"Descripció",counter:"400",rows:"3"},model:{value:e.editItem.descripcion,callback:function(t){e.$set(e.editItem,"descripcion",t)},expression:"editItem.descripcion"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[e._v("More")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary",disabled:!e.valid},on:{click:function(t){e.closeDialog("save")}}},[e._v("Guardar")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){e.closeDialog("cancel")}}},[e._v("Cancel·lar")])],1)],1)],1)],1)],2)},at=[],it={mixins:[le,te],data:function(){return{table:"empresas",headers:We.getTable("empresas"),dialogCiclos:!1}},mounted:function(){this.$emit("setTitle","Manteniment d'Empreses"),this.loadData()},methods:{loadData:function(){var e=this;u.getTable(this.table).then(function(t){return e.items=t.data}).catch(function(t){return e.msgErr(t)})},showItem:function(e){this.$router.push({path:"/ofertas",query:{id_empresa:e}})}}},rt=it,lt=Object(h["a"])(rt,tt,at,!1,null,null,null);lt.options.__file="Empresas.vue";var ot=lt.exports;x()(lt,{VAlert:ne["a"],VBtn:de["a"],VCard:ue["a"],VCardActions:me["a"],VCardText:me["b"],VCardTitle:ve["a"],VContainer:T["a"],VDataTable:he["a"],VDialog:be["a"],VFlex:xe["a"],VForm:_e["a"],VIcon:_["a"],VLayout:E["a"],VSpacer:S["a"],VTextField:ge["a"],VTextarea:Ie["a"],VTooltip:ke["a"]});var st=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n              "+e._s(t.msg)+"\n          ")])],1)}),a("v-card",[a("v-card-title",[a("v-btn",{attrs:{top:"",right:"",color:"blue",dark:""},on:{click:function(t){t.stopPropagation(),e.openDialog(!1,{activa:!0,ciclos:[]})}}},[a("v-icon",[e._v("add")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Filtrar taula","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{items:e.items,"no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Registres per pàgina",headers:e.headers,search:e.search},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n              "+e._s(t.header.text)+"\n              ")]),a("span",[e._v("\n              "+e._s(t.header.text)+"\n              ")])])]}},{key:"items",fn:function(t){return[a("tr",{attrs:{color:"red"}},[a("td",[a("v-chip",{attrs:{color:t.item.validada?"teal":"red",title:(t.item.activa?"Activa":"No activa")+" / "+(t.item.validada?"Validada":"No validada")},on:{dblclick:function(a){a.stopPropagation(),e.openDialogValidar(t.item)}}},[a("yes-no-icon",{attrs:{value:t.item.activa}})],1)],1),a("td",[e._v(e._s(e.nomEmpresa(t.item.id_empresa)))]),a("td",[e._v(e._s(t.item.puesto))]),a("td",[e._v(e._s(t.item.tipo_contrato))]),a("td",e._l(t.item.ciclos,function(t){return a("v-chip",{key:"cicl-"+t,attrs:{title:e.descCiclo(t)}},[e._v("\n          "+e._s(e.nomCiclo(t))+"\n      ")])}),1),a("td",[e._v(e._s(t.item.any))]),a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:"",title:"Més dades"},on:{click:function(e){t.expanded=!t.expanded}}},[a("v-icon",[e._v(e._s(t.expanded?"remove":"add"))])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){a.stopPropagation(),e.openDialog(t.item)}}},[a("v-icon",[e._v("edit")])],1),a("v-btn",{staticClass:"mx-0",attrs:{icon:""},on:{click:function(a){a.stopPropagation(),e.deleteItem(t.item)}}},[a("v-icon",[e._v("delete")])],1)],1)])]}},{key:"expand",fn:function(t){return[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("strong",[e._v("Descripció:")]),e._v(" "+e._s(t.item.descripcion)+"\n            "),t.item.telefono?[a("br"),a("strong",[e._v("Telèfon:")]),e._v(" "+e._s(t.item.telefono)+"\n            ")]:e._e(),t.item.email?[a("br"),a("strong",[e._v("E-mail:")]),e._v(" "+e._s(t.item.email)+"\n            ")]:e._e(),t.item.contacto?[a("br"),a("strong",[e._v("Contacte:")]),e._v(" "+e._s(t.item.contacto)+"\n            ")]:e._e(),t.item.resultat?[a("br"),a("strong",[e._v("Resultat:")]),e._v(" "+e._s(t.item.resultat)+"\n            ")]:e._e()],2)],1)]}},{key:"pageText",fn:function(t){return[e._v("      \n      Registres del "+e._s(t.pageStart)+" al "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n      ")]}}])},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n      La cerca de "'+e._s(e.search)+'" no dona cap resultat\n    ')])],1)],1),a("v-dialog",{attrs:{width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n        "+e._s(e.isNew?"Nou":"Editar")+" oferta\n      ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs1:""}},[a("v-text-field",{attrs:{label:"Id",placeholder:"Id",readonly:""},model:{value:e.editItem.id,callback:function(t){e.$set(e.editItem,"id",t)},expression:"editItem.id"}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-checkbox",{attrs:{label:"Activa",placeholder:"Activa"},model:{value:e.editItem.activa,callback:function(t){e.$set(e.editItem,"activa",t)},expression:"editItem.activa"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-checkbox",{attrs:{label:"Validada",placeholder:"Validada",disabled:""},model:{value:e.editItem.validada,callback:function(t){e.$set(e.editItem,"validada",t)},expression:"editItem.validada"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-select",{attrs:{label:"Descripció",placeholder:"Empresa",items:e.empresas,"item-text":"nombre","item-value":"id",required:"","single-line":""},on:{change:e.rellenaContacto},model:{value:e.editItem.id_empresa,callback:function(t){e.$set(e.editItem,"id_empresa",t)},expression:"editItem.id_empresa"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Telèfon",placeholder:"Telèfon",counter:"20",rules:e.required20Rules,required:""},model:{value:e.editItem.telefono,callback:function(t){e.$set(e.editItem,"telefono",t)},expression:"editItem.telefono"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{label:"E-mail",placeholder:"E-mail",counter:"20",rules:e.required20Rules,required:""},model:{value:e.editItem.email,callback:function(t){e.$set(e.editItem,"email",t)},expression:"editItem.email"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{label:"Persona de contacte",placeholder:"Persona de contacte",rules:e.required50Rules,required:""},model:{value:e.editItem.contacto,callback:function(t){e.$set(e.editItem,"contacto",t)},expression:"editItem.contacto"}})],1),a("v-flex",{attrs:{xs8:""}}),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Lloc de treball",placeholder:"Lloc de treball",rules:e.required50Rules,required:""},model:{value:e.editItem.puesto,callback:function(t){e.$set(e.editItem,"puesto",t)},expression:"editItem.puesto"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Descripció",placeholder:"Descripció",required:""},model:{value:e.editItem.descripcion,callback:function(t){e.$set(e.editItem,"descripcion",t)},expression:"editItem.descripcion"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tipus de contracte",placeholder:"Tipus de contracte",rules:e.required50Rules,required:""},model:{value:e.editItem.tipo_contrato,callback:function(t){e.$set(e.editItem,"tipo_contrato",t)},expression:"editItem.tipo_contrato"}})],1),a("v-flex",{attrs:{xs9:""}},[a("v-select",{attrs:{items:e.ciclos,"item-text":"ciclo","item-value":"id",label:"Cicles demanats",multiple:"",chips:"",hint:"Els aspirants han de tindre algú d'quests cicles","persistent-hint":""},model:{value:e.editItem.ciclos,callback:function(t){e.$set(e.editItem,"ciclos",t)},expression:"editItem.ciclos"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{label:"Any màxim",placeholder:"d'acabar el cicle",mask:"####",disabled:!e.editItem.ciclos||0==e.editItem.ciclos.length},model:{value:e.editItem.any,callback:function(t){e.$set(e.editItem,"any",t)},expression:"editItem.any"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Resultat",placeholder:"Per favor, indica el resultat de l'oferta (si s'ha cobert o no i per què)"},model:{value:e.editItem.resultat,callback:function(t){e.$set(e.editItem,"resultat",t)},expression:"editItem.resultat"}})],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[e._v("Help")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:e.saveItem}},[e._v("Guardar")]),a("v-btn",{attrs:{flat:""},on:{click:e.closeDialog}},[e._v("Cancel·lar")])],1)],1)],1),a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.dialogValidar,callback:function(t){e.dialogValidar=t},expression:"dialogValidar"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v(e._s(e.ofertaValidar.validada?"Invalidar":"Validar")+" Oferta")]),a("v-card-text",[e._v("\n        Vas a "+e._s(e.ofertaValidar.validada?"in":"")+"validar l'oferta '\n          "),a("strong",[e._v(e._s(e.ofertaValidar.puesto))]),e._v("\n          '. ¿Deseas continuar?\n      ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){return e.validaOferta(t)}}},[e._v("Aceptar")]),a("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(t){e.dialogValidar=!1}}},[e._v("Cancel·lar")])],1)],1)],1)],1)],2)},nt=[],ct={mixins:[te,le],components:{YesNoIcon:ee},data:function(){return{table:"ofertas",headers:[{text:"Activa",value:"activa"},{text:"Empresa",value:"id_empresa"},{text:"Lloc de traball",value:"puesto"},{text:"Contracte",value:"tipo_contrato"},{text:"Cicles",value:"cicles"},{text:"Any",value:"any"}],empresas:[],ciclos:[],cicloDesc:[],cicloDesc2:[],idiomas:[],dialogValidar:!1,ofertaValidar:{}}},mounted:function(){this.$emit("setTitle","Manteniment d'Ofertes"),this.loadData(),this.editItem.ciclos=[]},computed:{ciclosCod2Desc:function(){return this.ciclos.map(function(e){return e.ciclo})}},methods:{loadData:function(){var e=this;u.getTable(this.table,this.$route.query).then(function(t){return e.items=t.data}).catch(function(t){return e.msgErr(t)}),u.getTable("empresas").then(function(t){return e.empresas=t.data.map(function(e){return{id:e.id,nombre:e.nombre,contacto:e.contacto,telefono:e.telefono,email:e.email}})}).catch(function(t){return e.msgErr(t)}),u.getTable("ciclos").then(function(t){return e.ciclos=t.data.map(function(e){return{id:e.id,ciclo:e.ciclo,descrip:e.vCiclo}})}).catch(function(t){return e.msgErr(t)}),u.getTable("empresas").then(function(t){return e.idiomas=t.data.map(function(e){return{id:e.id,nombre:e.nombre}})}).catch(function(t){return e.msgErr(t)})},nomEmpresa:function(e){return e&&this.empresas.length?this.empresas.find(function(t){return t.id==e}).nombre:""},nomCiclo:function(e){return e&&this.ciclos.length?this.ciclos.find(function(t){return t.id==e}).ciclo:""},descCiclo:function(e){return e&&this.ciclos.length?this.ciclos.find(function(t){return t.id==e}).descrip:""},canviaAny:function(e){console.log(e)},saveItem:function(){this.addItem()},rellenaContacto:function(){for(var e=this,t=this.empresas.find(function(t){return t.id==e.editItem.id_empresa}),a=["telefono","email","contacto"],i=0;i<a.length;i++){var r=a[i];this.editItem[r]||(this.editItem[r]=t[r])}},newOferta:function(){this.editItem={activa:!0,ciclos:[]},this.openDialog(!1)},openDialogValidar:function(e){(e.activa||e.validada)&&(this.dialogValidar=!0,this.ofertaValidar=Object(ae["a"])({},e))},validaOferta:function(){this.editItem=this.ofertaValidar,this.editItem.validada=!this.editItem.validada,this.isNew=!1,this.addItem(),this.dialogValidar=!1},deleteItem:function(e){confirm("Segur que vols arxivar definitivament l'oferta '"+e.puesto+"' de l'empresa '"+this.nomEmpresa(e.id_empresa)+"'?")&&(this.editItem=Object(ae["a"])({},e),this.editItem.archivada=!0,this.isNew=!1,this.addItem(),this.items=this.items.filter(function(t){return t.id!=e.id}))}}},dt=ct,ut=Object(h["a"])(dt,st,nt,!1,null,null,null);ut.options.__file="Ofertas.vue";var mt=ut.exports;x()(ut,{VAlert:ne["a"],VBtn:de["a"],VCard:ue["a"],VCardActions:me["a"],VCardText:me["b"],VCardTitle:ve["a"],VCheckbox:fe["a"],VChip:pe["a"],VContainer:T["a"],VDataTable:he["a"],VDialog:be["a"],VFlex:xe["a"],VIcon:_["a"],VLayout:E["a"],VSelect:ze["a"],VSpacer:S["a"],VTextField:ge["a"],VTextarea:Ie["a"],VTooltip:ke["a"]});var vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n      "+e._s(t.msg)+"\n    ")])],1)}),a("v-card",[a("v-card-title",[a("v-btn",{attrs:{disabled:!e.selected.length,color:"blue"},on:{click:function(t){t.stopPropagation(),e.openMailDialog()}}},[a("v-icon",[e._v("mail_outline")])],1),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Filtrar taula","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{"select-all":"",items:e.items,"item-key":"id_alumno","no-data-text":"No hi ha dades disponibles","rows-per-page-text":"Registres per pàgina",headers:e.headers,search:e.search},scopedSlots:e._u([{key:"headerCell",fn:function(t){return[a("v-tooltip",{attrs:{bottom:""}},[a("span",{attrs:{slot:"activator"},slot:"activator"},[e._v("\n            "+e._s(t.header.text)+"\n          ")]),a("span",[e._v("\n            "+e._s(t.header.text)+"\n          ")])])]}},{key:"headers",fn:function(t){return[a("tr",[a("th",[a("v-checkbox",{attrs:{"input-value":t.all,indeterminate:t.indeterminate,primary:"","hide-details":""},on:{click:e.toggleAll}})],1),e._l(t.headers,function(t){return a("th",{key:t.text,class:[t.sortable?"column sortable":"",e.pagination.descending?"desc":"asc",t.value===e.pagination.sortBy?"active":""],on:{click:function(a){e.changeSort(t.value)}}},[a("v-icon",{attrs:{small:""}},[e._v("arrow_upward")]),e._v("\n        "+e._s(t.text)+"\n      ")],1)})],2)]}},{key:"items",fn:function(t){return[a("tr",{attrs:{active:t.selected},on:{click:function(e){t.selected=!t.selected}}},[a("td",[a("v-checkbox",{attrs:{"input-value":t.selected,primary:"","hide-details":""}})],1),a("td",[void 0!=t.item.interes?a("yes-no-icon",{attrs:{value:t.item.interes}}):e._e()],1),a("td",{staticClass:"text-xs-right"},[e._v(e._s(t.item.id_alumno))]),a("td",[e._v(e._s(t.item.nombre))]),a("td",[e._v(e._s(t.item.apellidos))]),a("td",e._l(t.item.ciclos,function(t){return a("v-chip",{key:"cicl-"+t.id_ciclo,attrs:{title:t.vCiclo,color:t.validado?"":"red lighten-4"}},[a("v-avatar",{attrs:{color:"grey"}},[a("strong",[e._v(e._s(t.any))])]),e._v("\n              "+e._s(t.ciclo)+"\n            ")],1)}),1),a("td",[t.item.cv_enlace?a("a",{attrs:{href:t.item.cv_enlace,target:"_blank"}},[a("v-icon",[e._v("folder_shared")])],1):e._e()]),a("td",{staticClass:"justify-center layout px-0"},[a("v-btn",{staticClass:"mx-0",attrs:{icon:"",title:"Més dades"},on:{click:function(e){t.expanded=!t.expanded}}},[a("v-icon",[e._v(e._s(t.expanded?"remove":"add"))])],1)],1)])]}},{key:"expand",fn:function(t){return[a("v-card",{attrs:{flat:""}},[a("v-card-text",[a("strong",[e._v("Domicil·li:")]),e._v(" "+e._s(t.item.domicilio)+"\n            "),a("v-spacer"),a("strong",[e._v("Telèfon:")]),e._v(" "+e._s(t.item.telefono)+"\n            "),a("v-spacer"),a("strong",[e._v("E-mail:")]),e._v(" "+e._s(t.item.email)+"\n          ")],1)],1)]}},{key:"pageText",fn:function(t){return[e._v("      \n        Registres del "+e._s(t.pageStart)+" al "+e._s(t.pageStop)+" de "+e._s(t.itemsLength)+"\n      ")]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[a("v-alert",{attrs:{slot:"no-results",value:!0,color:"error",icon:"warning"},slot:"no-results"},[e._v('\n        La cerca de "'+e._s(e.search)+'" no dona cap resultat\n      ')])],1)],1)],2)},ft=[],pt={mixins:[le],components:{YesNoIcon:ee},data:function(){return{table:"view-alumnos-oferta",pagination:{sortBy:"nombre"},selected:[],headers:[{text:"Interessat",value:"interessat"},{text:"Id",value:"id_alumno"},{text:"Nom",value:"nombre"},{text:"Cognoms",value:"apellidos"},{text:"Cicles",value:"cicles",sortable:!1},{text:"CV",value:"cv_enlace",sortable:!1}]}},mounted:function(){this.$emit("setTitle","Alumnes d'una Oferta"),this.loadData()},methods:{loadData:function(){var e=this;u.getTable(this.table).then(function(t){e.items=t.data}).catch(function(t){return e.msgErr(t)})},openMailDialog:function(){alert("mail")}}},ht=pt,bt=Object(h["a"])(ht,vt,ft,!1,null,null,null);bt.options.__file="AlumnosOferta.vue";var xt=bt.exports;x()(bt,{VAlert:ne["a"],VAvatar:ce["a"],VBtn:de["a"],VCard:ue["a"],VCardText:me["b"],VCardTitle:ve["a"],VCheckbox:fe["a"],VChip:pe["a"],VDataTable:he["a"],VIcon:_["a"],VSpacer:S["a"],VTextField:ge["a"],VTooltip:ke["a"]});var _t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h1",[e._v("Logout")])},gt=[],It={created:function(){confirm("¿Vols tancar la sessió?")?(sessionStorage.removeItem("user-data"),this.$router.push("/login")):this.$router.go(-1)}},kt=It,yt=Object(h["a"])(kt,_t,gt,!1,null,null,null);yt.options.__file="AppLogout.vue";var wt=yt.exports,Ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Inicia sessió")]),e._l(e.errors,function(t,i){return a("div",{key:i},[a("v-alert",{attrs:{type:t.type,dismissible:""},model:{value:t.show,callback:function(a){e.$set(t,"show",a)},expression:"error.show"}},[e._v("\n              "+e._s(t.msg)+"\n          ")])],1)}),a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-text-field",{attrs:{label:"Nom d'usuari",title:"Nom d'usuari",required:"",rules:e.usernameRules},model:{value:e.item.username,callback:function(t){e.$set(e.item,"username",t)},expression:"item.username"}}),a("v-text-field",{attrs:{label:"Contrasenya",title:"Contrasenya",required:"",rules:e.usernameRules},model:{value:e.item.password,callback:function(t){e.$set(e.item,"password",t)},expression:"item.password"}}),a("p",[a("a",{attrs:{href:"#"}},[e._v("He oblidat la meua contrasenya")])]),a("v-btn",{attrs:{disabled:!e.valid},on:{click:e.submit}},[e._v("\n    Login\n  ")]),a("v-btn",{on:{click:function(t){t.stopPropagation(),e.openDialog(!1)}}},[e._v("Registrar-se")])],1),a("v-dialog",{attrs:{width:"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-card-title",{staticClass:"grey lighten-4 py-4 title"},[e._v("\n        "+e._s(e.isNew?"Nou":"Editar")+" compte\n      ")]),a("v-container",{staticClass:"pa-4",attrs:{"grid-list-sm":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-text-field",{attrs:{label:"Nom d'usuari",title:"Nom d'usuari",required:"",rules:e.usernameRules},model:{value:e.editItem.username,callback:function(t){e.$set(e.editItem,"username",t)},expression:"editItem.username"}}),a("v-text-field",{attrs:{label:"Contrasenya",title:"Contrasenya",required:"",rules:e.usernameRules},model:{value:e.editItem.password,callback:function(t){e.$set(e.editItem,"password",t)},expression:"editItem.password"}}),a("v-text-field",{attrs:{label:"Repeteix la contrasenya",title:"Repeteix la contrasenya",required:"",rules:e.usernameRules},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),a("v-text-field",{attrs:{label:"E-mail",title:"E-mail",required:"",rules:e.emailRules},model:{value:e.editItem.email,callback:function(t){e.$set(e.editItem,"email",t)},expression:"editItem.email"}}),e.isNew?a("v-radio-group",{attrs:{hint:"Indica el teu rol en la borsa:","persistent-hint":!0,required:""},model:{value:e.editItem.rol,callback:function(t){e.$set(e.editItem,"rol",t)},expression:"editItem.rol"}},[a("v-radio",{attrs:{label:"Empresa - Ofereix un treball",value:5}}),a("v-radio",{attrs:{label:"Alumne - Busque un treball",value:7}})],1):e._e()],1)],1),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[e._v("More")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary",disabled:!e.valid},on:{click:e.registerUser}},[e._v("Guardar")]),a("v-btn",{attrs:{flat:""},on:{click:function(t){e.closeDialog()}}},[e._v("Cancel·lar")])],1)],1)],1)],1)],2)},Vt=[],qt={mixins:[le,te],data:function(){return{item:{},password2:""}},methods:{submit:function(){var e=this;u.getUser(this.item).then(function(t){sessionStorage.setItem("user-data",JSON.stringify(t.data)),e.$router.push("/ofertas")}).catch(function(e){sessionStorage.removeItem("user-data"),msgErr("ERROR: "+e)})},registerUser:function(){var e=this;u.saveUser(this.editUser).then(function(t){sessionStorage.setItem("user-data",JSON.stringify(t.data)),e.$router.push("/home")}).catch(function(e){sessionStorage.removeItem("user-data"),msgErr("ERROR: "+e)})}}},Tt=qt,$t=Object(h["a"])(Tt,Ct,Vt,!1,null,null,null);$t.options.__file="AppLogin.vue";var Rt=$t.exports;x()($t,{VAlert:ne["a"],VBtn:de["a"],VCard:ue["a"],VCardActions:me["a"],VCardTitle:ve["a"],VContainer:T["a"],VDialog:be["a"],VForm:_e["a"],VLayout:E["a"],VRadio:Ae["a"],VRadioGroup:Oe["a"],VSpacer:S["a"],VTextField:ge["a"]}),i["a"].use(F["a"]);var Et=sessionStorage.getItem("user-data"),Dt=function(e,t,a){Et?a("/home"):a()},Nt=function(e,t,a){Et?a():a("/login")},St=new F["a"]({mode:"history",base:"/",routes:[{path:"/login",name:"login",component:Rt,beforeEnter:Dt},{path:"/home",name:"home",component:G},{path:"/alumnos",name:"alumnos",component:we,beforeEnter:Nt},{path:"/perfil",name:"perfil",component:Re,beforeEnter:Nt},{path:"/register",name:"register",component:Pe},{path:"/ciclos",name:"ciclos",component:Je,beforeEnter:Nt},{path:"/empresas",name:"empresas",component:ot,beforeEnter:Nt},{path:"/ofertas",name:"ofertas",component:mt,beforeEnter:Nt},{path:"/alumnos-oferta",name:"alumnos-oferta",component:xt,beforeEnter:Nt},{path:"/menu",name:"menu",component:et,beforeEnter:Nt},{path:"/logout",name:"logout",component:wt,beforeEnter:Nt},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]});i["a"].config.productionTip=!1;var At=sessionStorage.getItem("user-data");At&&(l.a.defaults.headers.common["Authorization"]=JSON.parse(At).token),new i["a"]({router:St,render:function(e){return e(j)}}).$mount("#app")}});
//# sourceMappingURL=app.82ec55ae.js.map